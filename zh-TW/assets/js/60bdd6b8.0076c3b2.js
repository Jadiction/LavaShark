"use strict";(self.webpackChunk_lavashark_website=self.webpackChunk_lavashark_website||[]).push([[9654],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>g});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),i=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=i(e.components);return r.createElement(c.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,s=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=i(t),m=a,g=p["".concat(c,".").concat(m)]||p[m]||u[m]||s;return t?r.createElement(g,o(o({ref:n},d),{},{components:t})):r.createElement(g,o({ref:n},d))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var s=t.length,o=new Array(s);o[0]=m;var l={};for(var c in n)hasOwnProperty.call(n,c)&&(l[c]=n[c]);l.originalType=e,l[p]="string"==typeof e?e:a,o[1]=l;for(var i=2;i<s;i++)o[i]=t[i];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5843:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>i});var r=t(7462),a=(t(7294),t(3905));const s={sidebar_position:3},o="\u5165\u9580",l={unversionedId:"getting-started",id:"version-1.1.1/getting-started",title:"\u5165\u9580",description:"\u9019\u88e1\u6709\u4e00\u500b\u4f7f\u7528 discord.js v14 \u7684\u793a\u4f8b\u6559\u7a0b\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u8f03\u65e9\u7248\u672c\uff0c\u8acb\u66f4\u65b0\u5b83\u3002discord.js \u6307\u5357 \u63d0\u4f9b\u4e86\u8cc7\u6e90\u4f86\u5e6b\u52a9\u4f60\u9032\u884c\u66f4\u65b0\u904e\u7a0b\u3002",source:"@site/i18n/zh-TW/docusaurus-plugin-content-docs/version-1.1.1/getting-started.md",sourceDirName:".",slug:"/getting-started",permalink:"/zh-TW/docs/1.1.1/getting-started",draft:!1,editUrl:"https://github.com/hmes98318/LavaShark/blob/main/apps/website/versioned_docs/version-1.1.1/getting-started.md",tags:[],version:"1.1.1",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u4f3a\u670d\u5668\u914d\u7f6e",permalink:"/zh-TW/docs/1.1.1/server-config"},next:{title:"Classes",permalink:"/zh-TW/docs/1.1.1/category/classes"}},c={},i=[{value:"\u521d\u59cb\u5316 LavaShark \u548c discord.js \u51fd\u5f0f\u5eab",id:"\u521d\u59cb\u5316-lavashark-\u548c-discordjs-\u51fd\u5f0f\u5eab",level:3},{value:"\u8a3b\u518a\u4e8b\u4ef6",id:"\u8a3b\u518a\u4e8b\u4ef6",level:3},{value:"\u547d\u4ee4\u914d\u7f6e",id:"\u547d\u4ee4\u914d\u7f6e",level:3}],d={toc:i},p="wrapper";function u(e){let{components:n,...t}=e;return(0,a.kt)(p,(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"\u5165\u9580"},"\u5165\u9580"),(0,a.kt)("p",null,"\u9019\u88e1\u6709\u4e00\u500b\u4f7f\u7528 discord.js v14 \u7684\u793a\u4f8b\u6559\u7a0b\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u8f03\u65e9\u7248\u672c\uff0c\u8acb\u66f4\u65b0\u5b83\u3002",(0,a.kt)("a",{parentName:"p",href:"https://discordjs.guide/"},"discord.js \u6307\u5357")," \u63d0\u4f9b\u4e86\u8cc7\u6e90\u4f86\u5e6b\u52a9\u4f60\u9032\u884c\u66f4\u65b0\u904e\u7a0b\u3002  "),(0,a.kt)("h3",{id:"\u521d\u59cb\u5316-lavashark-\u548c-discordjs-\u51fd\u5f0f\u5eab"},"\u521d\u59cb\u5316 LavaShark \u548c discord.js \u51fd\u5f0f\u5eab"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const { Client, GatewayIntentBits } = require('discord.js');\nconst { LavaShark } = require('lavashark');\n\nconst TOKEN = 'your_token'; // Discord \u6a5f\u5668\u4eba token\nconst prefix = '-';         // \u6587\u5b57\u547d\u4ee4\u524d\u7db4\n\n\nconst client = new Client({\n    intents: [\n        GatewayIntentBits.Guilds,\n        GatewayIntentBits.GuildMessages,\n        GatewayIntentBits.MessageContent,\n        GatewayIntentBits.GuildVoiceStates,\n    ]\n});\n\nconst lavashark = new LavaShark({\n    nodes: [\n        {\n            id: 'Node 1',\n            hostname: 'localhost',\n            port: 2333,\n            password: 'youshallnotpass'\n        }\n    ],\n    sendWS: (guildId, payload) => { client.guilds.cache.get(guildId)?.shard.send(payload); }\n});\n\nclient.lavashark = lavashark;\nclient.login(TOKEN);\n")),(0,a.kt)("h3",{id:"\u8a3b\u518a\u4e8b\u4ef6"},"\u8a3b\u518a\u4e8b\u4ef6"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// -- LavaShark \u4e8b\u4ef6 --\n\n// \u7576\u97f3\u8ecc\u958b\u59cb\u64ad\u653e\u6642\u89f8\u767c\nclient.lavashark.on('trackStart', (player, track) => {\n    const channel = client.channels.cache.get(player.textChannelId);\n    channel.send(`Now playing \\`${track.title}\\``);\n});\n\n// \u7576\u968a\u5217\u7d50\u675f\u6642\u89f8\u767c\nclient.lavashark.on('queueEnd', (player) => {\n    const channel = client.channels.cache.get(player.textChannelId);\n    channel.send(`Queue ended`);\n    player.destroy();\n});\n\n// \u6b64\u4e8b\u4ef6\u7528\u65bc\u6355\u6349 LavaShark \u4e0a\u767c\u751f\u7684\u4efb\u4f55\u932f\u8aa4\nclient.lavashark.on('error', (node, err) => {\n    console.error('[LavaShark]', `Error on node ${node.identifier}`, err.message);\n});\n\n\n// -- Client \u4e8b\u4ef6 --\n\nclient.on('ready', () => {\n    console.log('Ready!');\n\n    // \u555f\u52d5 LavaShark \u4e26\u9023\u63a5\u5230\u6240\u6709 lavalink \u7bc0\u9ede\n    client.lavashark.start(client.user.id);\n});\n\n// -- \u5fc5\u9700\u7684 --\nclient.on('raw', (packet) => client.lavashark.handleVoiceUpdate(packet));\n\n")),(0,a.kt)("h3",{id:"\u547d\u4ee4\u914d\u7f6e"},"\u547d\u4ee4\u914d\u7f6e"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"client.on('messageCreate', async message => {\n    if (message.author.bot) return;\n    if (message.content.indexOf(prefix) !== 0) return;\n\n\n    const args = message.content.slice(prefix.length).trim().split(/ +/g);\n    const command = args.shift().toLowerCase();\n\n    if (!message.member.voice.channel)\n        return message.reply('\u274c | You are not connected to an audio channel.');\n\n    if (message.guild.members.me.voice.channel && message.member.voice.channelId !== message.guild.members.me.voice.channelId)\n        return message.reply('\u274c | You are not on the same audio channel as me.');\n\n\n    console.log('--', command);\n\n    if (command === 'play') {\n        const track = args[0];\n\n        const res = await client.lavashark.search(track);\n\n        if (res.loadType === \"LOAD_FAILED\") {\n            console.log(`Search Error: ${res.exception.message}`);\n            return message.reply('\u274c | Not found music.');\n        }\n        else if (res.loadType === \"NO_MATCHES\") {\n            console.log(`Search Error: NO_MATCHES`);\n            return message.reply('\u274c | No matches.');\n        }\n\n        // \u5275\u5efa\u97f3\u983b\u64ad\u653e\u5668\n        const player = client.lavashark.createPlayer({\n            guildId: message.guild.id,\n            voiceChannelId: message.member.voice.channelId,\n            textChannelId: message.channel.id,\n            selfDeaf: true\n        });\n\n        // \u9023\u63a5\u5230\u8a9e\u97f3\u983b\u9053\n        try {\n            player.connect();\n        } catch (error) {\n            console.log(error);\n            return message.reply('\u274c | I can\\'t join voice channel.');\n        }\n\n        if (res.loadType === 'PLAYLIST_LOADED') {\n            for (const track of res.tracks) {\n                track.setRequester(message.user);\n                player.queue.add(track);\n            }\n\n            message.reply(`Playlist \\`${res.playlistInfo.name}\\` loaded!`);\n        }\n        else {\n            const track = res.tracks[0];\n            track.setRequester(message.user);\n\n            player.queue.add(track);\n            message.reply(`Queued \\`${track.title}\\``);\n        }\n\n        if (!player.playing) player.play();\n    }\n});\n")))}u.isMDXComponent=!0}}]);